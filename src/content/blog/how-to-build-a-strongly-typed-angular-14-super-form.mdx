---
title: "How To Build a Strongly Typed Angular 14 Super Form"
description: "Enforce Form Control Types via your Data Models"
pubDate: 2022-06-09
author: "Bobby Galli"
categories: ["Web Development"]
tags: ["programming", "angular", "typescript", "javascript", "web-development"]
---

## Typed Forms

> "Typed forms ensure that the values inside of form controls, groups, and arrays are type safe across the entire API surface. This enables safer forms, especially for deeply nested complex cases." â€” [Angular Blog](https://blog.angular.io/angular-v14-is-now-available-391a6db736af)

With Angular 14 `FormControls` and `FormGroups` are now strongly typed:

```typescript
interface Shirt {
  size: 'sm' | 'md' | 'lg' | 'xl';
  color: 'red' | 'green' | 'blue';
}

interface Item<T> {
  name: string;
  quantity: number;
  details: T;
}

@Component({...})
export class ShirtFormComponent {
  @Output() addShirtToCartRequested = new EventEmitter<Item<Shirt>>();

  formGroup = new FormGroup({
    name: new FormControl('', { nonNullable: true }),
    quantity: new FormControl(1, { nonNullable: true }),
    details: new FormGroup({
      size: new FormControl<'sm' | 'md' | 'lg' | 'xl'>('md', { nonNullable: true }),
      color: new FormControl<'red' | 'green' | 'blue'>('blue', { nonNullable: true })
    })
  });

  onSubmit() {
    this.addShirtToCartRequested.emit(this.formGroup.getRawValue());
  }
}
```

Notice with the example above, we can emit the value of `this.formGroup.getRawValue()` directly via `addShirtToCartRequested` because the type of the return value matches our `Item<Shirt>` interface. The addition of strong types in Angular forms allows us to write code faster and with fewer bugs.

Additionally, the editor can now provide us with type-ahead suggestions for our form's `value` property.

The type-safe form value will cause the compiler to emit errors when we access a property that doesn't exist or use a property in a way that conflicts with its type definition.

There's one piece that's missing from our example above. What if we wanted to enforce that `formGroup` matches the `Item<Shirt>` interface when `formGroup` is declared?

Wouldn't it be nice if we were able to explicitly type `formGroup` to match our `Item<Shirt>` interface at declaration time? Have no fear, Super Forms are here!

## Super Forms

A Super Form is a contrived term to describe a [FormGroup](https://angular.io/guide/typed-forms#formgroup-and-formrecord) interface that matches the interface of a data model. Thanks to this 'Bonus' snippet from [Netanel Basel](https://netbasal.com/typed-reactive-forms-in-angular-no-longer-a-type-dream-bf6982b0af28), typing the inputs and outputs of a form in Angular 14 can be accomplished by introducing a nifty `ControlsOf` type:

```typescript
import { FormArray, FormControl, FormGroup } from '@angular/forms';

type ControlsOf<T extends Record<string, any>> = {
  [K in keyof T]: T[K] extends Record<any, any>
    ? T[K] extends Array<infer U>
      ? U extends Record<any, any>
        ? FormArray<FormGroup<ControlsOf<U>>>
        : FormArray<FormControl<U>>
      : FormGroup<ControlsOf<T[K]>>
    : FormControl<T[K]>;
};
```

Now you can enforce the type of `formGroup` at declaration time and give your `FormGroup` superpowers by using `ControlsOf` like so:

```typescript
@Component({...})
export class ShirtFormComponent {
  @Output() addShirtToCartRequested = new EventEmitter<Item<Shirt>>();

  formGroup: FormGroup<ControlsOf<Item<Shirt>>> = new FormGroup({
    name: new FormControl('', { nonNullable: true }),
    quantity: new FormControl(1, { nonNullable: true }),
    details: new FormGroup({
      size: new FormControl<'sm' | 'md' | 'lg' | 'xl'>('md', { nonNullable: true }),
      color: new FormControl<'red' | 'green' | 'blue'>('blue', { nonNullable: true })
    })
  });

  onSubmit() {
    this.addShirtToCartRequested.emit(this.formGroup.getRawValue());
  }
}
```

Now, if you forget to include a property in `formGroup` you'll get an error at declaration time.

## Stack Blitz

A full example that demonstrates an Angular 14 Super Form can be found in the embedded Stack Blitz included below:

[View the Super Form Example on StackBlitz](https://stackblitz.com/edit/angular-14-super-form)

If you'd like to learn more about Angular 14 typed forms, please see the Angular 14 release [blog post](https://blog.angular.io/angular-v14-is-now-available-391a6db736af). Good luck!

**Want to Connect?** If you found the information in this tutorial valuable, follow me on [X](https://x.com/bobbyg603).
